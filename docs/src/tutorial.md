# Tutorial

This tutorial will introduce all the concepts necessary to get
started. **Paisa** builds on top of **ledger**, so we will first spend
some time to familiarize the [terms and concepts](https://github.com/ledger/ledger/blob/master/doc/GLOSSARY.md) used by **ledger**

## Journal

A journal file captures all your financial transactions. A transaction
may represent a mutual fund purchase, EPF contribution and so
on. Let's create a file named `personal.ledger` with the following
content

```go
2022/01/01 Salary
    Income:Salary:Acme                         -100,000 INR
    Assets:Checking                             100,000 INR
```

**ledger** follows the double-entry accounting system. In simple terms, it
tracks the movement of money from debit account to credit
account. Here `Income:Salary:Acme` is the debit account and
`Assets:Checking` is the credit account. The date at which the
transaction took place and a description of the transaction is written
in the first line followed by the list of credit or debit
entry. Account [naming conventions](./accounts.md) are explained later. The `:` in the account name
represents hierarchy. Its use will become more clear when we look at
the reports generated by ledger. The sum of the balance of all the
accounts must be zero.

```go
2022/01/01 Salary
    Income:Salary:Acme                         -100,000 INR
    Assets:Checking                             100,000 INR

2022/02/01 Salary
    Income:Salary:Acme                         -100,000 INR
    Assets:Checking                             100,000 INR

2022/03/01 Salary
    Income:Salary:Acme                         -100,000 INR
    Assets:Checking                             100,000 INR
```

let's add few more entries. The total balance in your savings account
could be found by

```go
❯ ledger -f personal.ledger balance Assets:Checking
300,000 INR  Assets:Checking
```

Let's say your company deducts 12,000 INR and contributes it to EPF,
we could represent it as follows

```go
2022/01/01 Salary
    Income:Salary:Acme                         -100,000 INR
    Assets:Checking                              88,000 INR
    Assets:Debt:EPF                              12,000 INR

2022/02/01 Salary
    Income:Salary:Acme                         -100,000 INR
    Assets:Checking                              88,000 INR
    Assets:Debt:EPF                              12,000 INR

2022/03/01 Salary
    Income:Salary:Acme                         -100,000 INR
    Assets:Checking                              88,000 INR
    Assets:Debt:EPF                              12,000 INR
```


```shell
❯ ledger -f personal.ledger balance Assets
          36,000 INR  Assets:Debt:EPF
         264,000 INR  Assets:Checking
--------------------
         300,000 INR
```

## Commodity

So far we have only dealt with INR. **ledger** can handle commodity as
well. Let's say you are also investing 10,000 INR in UTI Nifty Index
Fund and 10,000 INR in ICICI Nifty Next 50 Index Fund every
month.

```go
2018/01/01 Investment
    Assets:Checking                              -20,000 INR
    Assets:Equity:NIFTY         148.0865 NIFTY @ 67.5281 INR
    Assets:Equity:NIFTY_JR   358.6659 NIFTY_JR @ 27.8811 INR

2018/02/01 Investment
    Assets:Checking                              -20,000 INR
    Assets:Equity:NIFTY         140.2870 NIFTY @ 71.2824 INR
    Assets:Equity:NIFTY_JR   363.2242 NIFTY_JR @ 27.5312 INR

2018/03/01 Investment
    Assets:Checking                              -20,000 INR
    Assets:Equity:NIFTY         147.5908 NIFTY @ 67.7549 INR
    Assets:Equity:NIFTY_JR   378.4323 NIFTY_JR @ 26.4248 INR
```

Let's consider `148.0865 NIFTY @ 67.5281 INR`. Here NIFTY is the name
of the commodity and we have bought 148.0865 units at 67.5281 INR per
unit.

```
❯ ledger -f personal.ledger balance Assets --market
          94,615 INR  Assets
          36,000 INR    Debt:EPF
          58,615 INR    Equity
          29,539 INR      NIFTY
          29,076 INR      NIFTY_JR
--------------------
          94,615 INR
```

## Interest

There are many instruments like EPF, FD, etc that pay interest at
regular intervals. We can treat it as just another transaction.

```go
2022/03/31 EPF Interest
    Income:Interest:EPF                         -15,000 INR
    Assets:Debt:EPF                              15,000 INR
```

## Config

So far we have been mostly talking about **ledger**. We need to know
the basics of **ledger** because **paisa** builds on top of
**ledger**.

**paisa** checks for a config file named `paisa.yaml` in the current
directory. It can also be set via flag `--config` or env variable
`PAISA_CONFIG`. The default config is tuned for Indians, users from
other countries would have to change the `default_currency` and
`locale`. Check the [config](./config.md) section for details.

```yaml
# absolute path of journal file
journal_path: /home/john/finance/personal.ledger
# absolute path of sql database
db_path: /home/john/finance/paisa.db
# commodities list
commodities:
  - name: NIFTY
    type: mutualfund
    code: 120716
  - name: NIFTY_JR
    type: mutualfund
    code: 120684
```

**paisa** can fetch the latest price of mutual funds, nps funds and
stocks as of today. For other types of commodities, the purchase/sell
price of the last transaction would be considered the latest
price. The code is the scheme code of the fund. The *search* command
can be used to find scheme code

```shell
❯ paisa search mutualfund
INFO Using config file: /home/john/finance/paisa.yaml
INFO Using cached results; pass '-u' to update the cache
✔ ICICI Prudential Asset Management Company Limited
✔ ICICI Prudential Nifty Next 50 Index Fund - Direct Plan -  Growth
INFO Mutual Fund Scheme Code: 120684
```


You might see a lot of funds with similar names. The search command
supports crude fuzzy search. For example, `nifty next grow direct` would match the above fund.


## Update

Once the config file is created, run the update command, followed by
the serve command.

```shell
❯ paisa update
INFO Using config file: /home/john/finance/paisa.yaml
INFO Syncing transactions from journal
INFO Fetching commodities price history
INFO Fetching commodity NIFTY
INFO Fetching commodity NIFTY_JR
❯ paisa serve
INFO Using config file: /home/john/finance/paisa.yaml
INFO Listening on 7500
```

You can then go to [http://localhost:7500](http://localhost:7500) to view more
details. The update command loads all the transactions from journal
file and fetch the latest price of all the commodities. Whenever you
make any changes to the journal file, you need to run the update
command. The serve command starts a local server and provides the
Web UI.
